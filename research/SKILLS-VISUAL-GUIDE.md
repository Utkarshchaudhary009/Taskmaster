# Agent Skills Architecture - Visual Guide

This document provides visual diagrams to understand the Skills framework.

---

## 1. Progressive Disclosure Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Agent Context Window                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ALWAYS LOADED (Level 1)                               â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  System Prompt + Rules + Metadata of ALL Skills      â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  â€¢ api-auditor: "Audits APIs when..."    (~20 tokens)â”‚    â”‚
â”‚  â”‚  â€¢ pdf-editor: "Edits PDFs when..."      (~20 tokens)â”‚    â”‚
â”‚  â”‚  â€¢ code-reviewer: "Reviews code when..." (~20 tokens)â”‚    â”‚
â”‚  â”‚  [... 50 more skills]                                 â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  Total: ~1,000 tokens                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚         â†“ USER: "Can you audit https://example.com"            â”‚
â”‚         â†“ AGENT: activate_skill("api-auditor")                 â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ TRIGGERED (Level 2)                                   â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  api-auditor SKILL.md Body:                          â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  # API Auditor                                        â”‚    â”‚
â”‚  â”‚  You act as a QA engineer...                          â”‚    â”‚
â”‚  â”‚  1. Use scripts/audit.js                              â”‚    â”‚
â”‚  â”‚  2. Analyze output                                    â”‚    â”‚
â”‚  â”‚  3. Report findings                                   â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  Total: ~500 tokens                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚         â†“ AGENT: Needs to run script                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ AS NEEDED (Level 3)                                   â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  Execute: node scripts/audit.js https://example.com   â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  (Script runs WITHOUT loading code into context)      â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  Total: 0 tokens (execution-based)                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KEY INSIGHT: Only ~500 tokens added per activated skill, 
            not thousands from loading full content upfront
```

---

## 2. Skill Discovery & Precedence

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚  User Request: "Review my code"                        â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Skill Discovery (4 Tiers - Gemini-CLI Model)         â”‚
â”‚                                                         â”‚
â”‚  Tier 4: ~/.agent/skills/code-reviewer/   â† USER      â”‚
â”‚           (Personal, cross-project)        HIGHEST    â”‚
â”‚                                           PRECEDENCE   â”‚
â”‚  Tier 3: .agent/skills/code-reviewer/    â† WORKSPACE  â”‚
â”‚           (Project-specific, in Git)                   â”‚
â”‚                                                         â”‚
â”‚  Tier 2: extensions/my-ext/skills/       â† EXTENSION  â”‚
â”‚           (Bundled with extensions)                    â”‚
â”‚                                                         â”‚
â”‚  Tier 1: builtin/code-reviewer/          â† BUILT-IN   â”‚
â”‚           (Shipped with tool)             LOWEST      â”‚
â”‚                                          PRECEDENCE    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Resolution Rule:                                       â”‚
â”‚                                                         â”‚
â”‚  If "code-reviewer" exists in Tier 3,                  â”‚
â”‚  it OVERRIDES Tier 2, Tier 1                           â”‚
â”‚                                                         â”‚
â”‚  Workspace > User > Extension > Built-in               â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Skill Structure Deep Dive

```
my-skill/
â”‚
â”œâ”€â”€ SKILL.md                          â† ALWAYS REQUIRED
â”‚   â”‚
â”‚   â”œâ”€â”€ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”‚   â”‚ YAML Frontmatter        â”‚
â”‚   â”‚   â”‚                         â”‚
â”‚   â”‚   â”‚ name: my-skill          â”‚ â† Must match folder name
â”‚   â”‚   â”‚ description: |          â”‚ â† PRIMARY TRIGGER
â”‚   â”‚   â”‚   Expert in X. Use      â”‚    (Single-line or multi-line)
â”‚   â”‚   â”‚   when user asks about  â”‚
â”‚   â”‚   â”‚   Y or Z.               â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   â”‚
â”‚   â””â”€â”€ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚ Markdown Body           â”‚
â”‚       â”‚                         â”‚
â”‚       â”‚ # My Skill              â”‚
â”‚       â”‚                         â”‚
â”‚       â”‚ ## Instructions         â”‚
â”‚       â”‚ 1. Do X                 â”‚
â”‚       â”‚ 2. Use scripts/foo.js   â”‚ â† Reference bundled files
â”‚       â”‚ 3. See [docs](refs/)    â”‚ â† Link to references
â”‚       â”‚                         â”‚
â”‚       â”‚ < 500 lines ideal       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”œâ”€â”€ scripts/                          â† OPTIONAL
â”‚   â”‚
â”‚   â”œâ”€â”€ audit.js                      â† Deterministic tasks
â”‚   â”œâ”€â”€ rotate_pdf.cjs                â† Fragile operations
â”‚   â””â”€â”€ example_script.ts             â† Delete if unused
â”‚   â”‚
â”‚   â””â”€â”€  ğŸ’¡ Agentic Design:
â”‚        â€¢ LLM-friendly stdout: "âœ… Success"
â”‚        â€¢ Suppress verbose errors
â”‚        â€¢ Paginate output: "First 50 lines..."
â”‚
â”œâ”€â”€ references/                       â† OPTIONAL
â”‚   â”‚
â”‚   â”œâ”€â”€ schema.md                     â† DB schemas
â”‚   â”œâ”€â”€ api-docs.md                   â† API specs
â”‚   â”œâ”€â”€ finance.md                    â† Domain knowledge
â”‚   â””â”€â”€ policies.md                   â† Company policies
â”‚   â”‚
â”‚   â””â”€â”€  ğŸ’¡ Progressive Pattern:
â”‚        SKILL.md: "See [finance.md](references/finance.md)"
â”‚        â†’ Agent loads ONLY when needed
â”‚
â””â”€â”€ assets/                           â† OPTIONAL
    â”‚
    â”œâ”€â”€ template.html                 â† HTML boilerplate
    â”œâ”€â”€ logo.png                      â† Brand assets
    â””â”€â”€ nda-template.pdf              â† Legal docs
    â”‚
    â””â”€â”€  ğŸ’¡ Key Difference:
         â€¢ references/ = Agent READS
         â€¢ assets/ = Agent USES (copy, modify)
```

---

## 4. The 7-Step Creation Workflow (Visual)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: UNDERSTAND                                           â”‚
â”‚                                                              â”‚
â”‚  Goal: Get 3-5 concrete examples                            â”‚
â”‚                                                              â”‚
â”‚  USER: "I want a skill for API testing"                     â”‚
â”‚  YOU:  "What examples trigger this?"                        â”‚
â”‚  USER: "Audit https://example.com"                          â”‚
â”‚        "Check if API is responding"                         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: PLAN RESOURCES                                       â”‚
â”‚                                                              â”‚
â”‚  For each example, identify bundles:                        â”‚
â”‚                                                              â”‚
â”‚  Example: "Audit https://example.com"                       â”‚
â”‚  â†’ Need: scripts/audit.js (code rewritten repeatedly)       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: INITIALIZE                                           â”‚
â”‚                                                              â”‚
â”‚  $ node init_skill.cjs api-auditor --path .agent/skills     â”‚
â”‚                                                              â”‚
â”‚  Creates:                                                    â”‚
â”‚    api-auditor/                                              â”‚
â”‚    â”œâ”€â”€ SKILL.md (template)                                  â”‚
â”‚    â”œâ”€â”€ scripts/example_script.cjs                           â”‚
â”‚    â”œâ”€â”€ references/example_reference.md                      â”‚
â”‚    â””â”€â”€ assets/example_asset.txt                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: EDIT                                                 â”‚
â”‚                                                              â”‚
â”‚  1. Create scripts/audit.js (and TEST it!)                  â”‚
â”‚  2. Delete unused example files                             â”‚
â”‚  3. Write SKILL.md frontmatter + body                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: PACKAGE                                              â”‚
â”‚                                                              â”‚
â”‚  $ node package_skill.cjs .agent/skills/api-auditor         â”‚
â”‚                                                              â”‚
â”‚  Validates:                                                  â”‚
â”‚    âœ… YAML frontmatter valid                                â”‚
â”‚    âœ… Name matches folder                                   â”‚
â”‚    âœ… Description comprehensive                             â”‚
â”‚    âœ… No TODOs remaining                                    â”‚
â”‚                                                              â”‚
â”‚  Output: api-auditor.skill (zip file)                       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 6: INSTALL                                              â”‚
â”‚                                                              â”‚
â”‚  $ gemini skills install api-auditor.skill --scope user     â”‚
â”‚                                                              â”‚
â”‚  User must reload:                                           â”‚
â”‚    > /skills reload                                          â”‚
â”‚    > /skills list                                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 7: ITERATE                                              â”‚
â”‚                                                              â”‚
â”‚  1. Test on real task                                        â”‚
â”‚  2. Notice what's missing                                    â”‚
â”‚  3. Update SKILL.md or scripts                               â”‚
â”‚  4. Repackage and reinstall                                  â”‚
â”‚  5. Repeat                                                   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Skills vs. Rules vs. MCP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AGENT ARCHITECTURE                         â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ALWAYS LOADED (System Context)                       â”‚    â”‚
â”‚  â”‚                                                       â”‚    â”‚
â”‚  â”‚  â€¢ System Prompt                                     â”‚    â”‚
â”‚  â”‚  â€¢ Rules (.agent/AGENT.md) â† Persistent behavior     â”‚    â”‚
â”‚  â”‚  â€¢ Skill Metadata          â† Names + descriptions    â”‚    â”‚
â”‚  â”‚                                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ TRIGGERED ON DEMAND (Progressive)                    â”‚    â”‚
â”‚  â”‚                                                       â”‚    â”‚
â”‚  â”‚  â€¢ Skill Body (SKILL.md)   â† When activated         â”‚    â”‚
â”‚  â”‚  â€¢ Skill Resources         â† As needed               â”‚    â”‚
â”‚  â”‚                                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ EXTERNAL INVOCATION (API/Function Calls)             â”‚    â”‚
â”‚  â”‚                                                       â”‚    â”‚
â”‚  â”‚  â€¢ MCP Servers             â† Tools/Resources via RPC â”‚    â”‚
â”‚  â”‚  â€¢ Web APIs                â† HTTP requests           â”‚    â”‚
â”‚  â”‚  â€¢ Shell Commands          â† Process execution       â”‚    â”‚
â”‚  â”‚                                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

COMPARISON TABLE:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Feature    â”‚  Rules       â”‚  Skills       â”‚  MCP        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Loading     â”‚ Always       â”‚ On-demand     â”‚ API calls   â”‚
â”‚ Scope       â”‚ Global       â”‚ Task-specific â”‚ External    â”‚
â”‚ Purpose     â”‚ Behavior     â”‚ Expertise     â”‚ Tools       â”‚
â”‚ Location    â”‚ .agent/      â”‚ .agent/skills/â”‚ Separate    â”‚
â”‚ Format      â”‚ Markdown     â”‚ SKILL.md      â”‚ JSON-RPC    â”‚
â”‚ Portability â”‚ Project-only â”‚ Cross-platformâ”‚ Protocol    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

WHEN TO USE WHAT:

â€¢ Rules: "Always use TypeScript", "Never commit .env"
â€¢ Skills: "How to deploy to AWS", "Code review workflow"
â€¢ MCP: "Query PostgreSQL", "Search vector database"
```

---

## 6. Degrees of Freedom Spectrum (Antigravity Pattern)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TASK FRAGILITY vs. SPECIFICITY                  â”‚
â”‚                                                              â”‚
â”‚  HIGH FREEDOM (Text Instructions)                           â”‚
â”‚  â†“                                                           â”‚
â”‚  â”‚  Use Case: Code review, brainstorming, design feedback  â”‚
â”‚  â”‚  Format:   Natural language guidelines                  â”‚
â”‚  â”‚  Example:  "Review for security. Flag SQL injection."   â”‚
â”‚  â”‚                                                           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  â”‚ # Code Reviewer                        â”‚             â”‚
â”‚  â”‚  â”‚                                        â”‚             â”‚
â”‚  â”‚  â”‚ 1. Analyze staged changes              â”‚             â”‚
â”‚  â”‚  â”‚ 2. Check against conventions           â”‚             â”‚
â”‚  â”‚  â”‚ 3. Flag security issues                â”‚             â”‚
â”‚  â”‚  â”‚ 4. Suggest improvements                â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”‚                                                           â”‚
â”‚  â†“                                                           â”‚
â”‚                                                              â”‚
â”‚  MEDIUM FREEDOM (Pseudocode + Parameters)                   â”‚
â”‚  â†“                                                           â”‚
â”‚  â”‚  Use Case: API design, component structure              â”‚
â”‚  â”‚  Format:   Template code with options                   â”‚
â”‚  â”‚  Example:  "Use pattern X, configure Y based on Z"      â”‚
â”‚  â”‚                                                           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  â”‚ # React Component Creator              â”‚             â”‚
â”‚  â”‚  â”‚                                        â”‚             â”‚
â”‚  â”‚  â”‚ ```tsx                                 â”‚             â”‚
â”‚  â”‚  â”‚ export const {Name}: FC<Props> = () => â”‚             â”‚
â”‚  â”‚  â”‚   // State management: [option]        â”‚             â”‚
â”‚  â”‚  â”‚   // Styling: [tailwind|css]           â”‚             â”‚
â”‚  â”‚  â”‚ ```                                    â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”‚                                                           â”‚
â”‚  â†“                                                           â”‚
â”‚                                                              â”‚
â”‚  LOW FREEDOM (Exact Scripts)                                â”‚
â”‚  â†“                                                           â”‚
â”‚  â”‚  Use Case: DB migration, PDF rotation, image processing â”‚
â”‚  â”‚  Format:   Specific executable code                     â”‚
â”‚  â”‚  Example:  "Run this exact script with params X, Y"     â”‚
â”‚  â”‚                                                           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  â”‚ # PDF Editor                           â”‚             â”‚
â”‚  â”‚  â”‚                                        â”‚             â”‚
â”‚  â”‚  â”‚ Rotate PDF:                            â”‚             â”‚
â”‚  â”‚  â”‚ ```bash                                â”‚             â”‚
â”‚  â”‚  â”‚ node scripts/rotate.cjs <file> 90      â”‚             â”‚
â”‚  â”‚  â”‚ ```                                    â”‚             â”‚
â”‚  â”‚  â”‚                                        â”‚             â”‚
â”‚  â”‚  â”‚ (Exact command, no deviation)          â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”‚                                                           â”‚
â”‚  â†“                                                           â”‚
â”‚                                                              â”‚
â”‚  ğŸ’¡ RULE: Match specificity to fragility                    â”‚
â”‚       Fragile tasks = Low freedom (exact scripts)           â”‚
â”‚       Heuristic tasks = High freedom (text guidance)        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. TM-Bun Architecture (Proposed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TM-Bun CLI                             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ SkillManager                                        â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  discoverSkills():                                  â”‚  â”‚
â”‚  â”‚    Built-in â†’ User â†’ Workspace                      â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  activateSkill(name):                               â”‚  â”‚
â”‚  â”‚    1. Load metadata (if not cached)                 â”‚  â”‚
â”‚  â”‚    2. Load body on demand                           â”‚  â”‚
â”‚  â”‚    3. Provide to agent context                      â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Skill Validator                                     â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  validateSkill(path):                               â”‚  â”‚
â”‚  â”‚    âœ… YAML frontmatter                              â”‚  â”‚
â”‚  â”‚    âœ… Name matches folder                           â”‚  â”‚
â”‚  â”‚    âœ… Description complete                          â”‚  â”‚
â”‚  â”‚    âœ… No TODOs                                       â”‚  â”‚
â”‚  â”‚    âœ… Body < 500 lines (warn)                       â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Skill Packager                                      â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  packageSkill(path):                                â”‚  â”‚
â”‚  â”‚    1. Validate skill                                â”‚  â”‚
â”‚  â”‚    2. Create zip archive                            â”‚  â”‚
â”‚  â”‚    3. Name: {skill-name}.skill                      â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   File System                               â”‚
â”‚                                                             â”‚
â”‚  ~/.agent/skills/           â† User (cross-project)         â”‚
â”‚  .agent/skills/             â† Workspace (Git-tracked)      â”‚
â”‚  builtin/skills/            â† Bundled with TM-Bun          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**End of Visual Guide**

For complete implementation details, see:
- **SKILLS-FRAMEWORK-RESEARCH.md** (Full research)
- **SKILLS-EXECUTIVE-SUMMARY.md** (Quick reference)
